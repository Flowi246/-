/* ========== THEME TOKENS ========== */
:root{
  --bg:#0b0f14;
  --text:#e9eef7;
  --muted:#9fb0c4;

  --primary:#6b9aff;
  --primary-2:#3f7bff;
  --accent:#12c2a9;

  --card:#0f151f;
  --card-2:#101824;
  --glass:rgba(17,23,34,.65);
  --border:#1b2633;

  --thead:#0f1620;
  --table:#0e141b;

  --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;

  --radius:16px;
  --gap:20px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --shadow-soft:0 6px 18px rgba(0,0,0,.22);
  --ring:0 0 0 2px rgba(123,166,255,.45);

  --fz-sm:12px; --fz-md:14px; --fz-lg:16px;
  --control-h:40px;
}

/* ========== BASE ========== */
*{box-sizing:border-box}
*:focus{outline:none}
:focus-visible{box-shadow:var(--ring)}

html,body{height:100%}
body{
  margin:0; color:var(--text);
  font:var(--fz-md)/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px 800px at 10% -10%, rgba(18,194,169,.07), transparent 55%),
    radial-gradient(1000px 700px at 110% 0%, rgba(91,141,255,.09), transparent 60%),
    linear-gradient(180deg,#0b0f14,#0c121a);
  min-height:100vh; display:flex; flex-direction:column;
}

h1,h2,h3,p{margin:0}

/* ========== ORBS (decor) ========== */
.orb{position:fixed; filter:blur(40px); opacity:.45; z-index:-1; pointer-events:none}
.orb-a{width:420px;height:420px;background:radial-gradient(circle at 30% 30%, #4e86ff, transparent 60%); top:-120px; left:-80px;}
.orb-b{width:520px;height:520px;background:radial-gradient(circle at 70% 40%, #12c2a9, transparent 65%); bottom:-160px; right:-120px;}
.orb-c{width:300px;height:300px;background:radial-gradient(circle at 50% 50%, #7aa4ff, transparent 60%); top:42%; left:-120px;}

/* ========== LAYOUT ========== */
.container{max-width:1100px; margin:0 auto; padding:0 18px}
main{flex:1; padding:20px 0}
.app-centered{align-items:center}
.app-centered .card, .app-centered .hint-panel{width:100%; max-width:960px}

/* Header (glass, sticky) */
.app-header{
  position:sticky; top:0; z-index:10;
  backdrop-filter: blur(10px);
  background:linear-gradient(180deg, var(--glass), rgba(17,23,34,.35));
  border-bottom:1px solid rgba(255,255,255,.06);
}
.header-bar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 0}
.app-title{
  font-size:clamp(18px, 2.2vw, 24px);
  font-weight:800;
  background:linear-gradient(90deg,#88b0ff,#12c2a9);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.top-nav a{color:#cfe0ff; text-decoration:none; opacity:.9}
.top-nav a:hover{opacity:1; text-decoration:underline}

/* Footer */
.app-footer{ padding:18px 0; color:var(--muted); border-top:1px solid rgba(255,255,255,.06); background:rgba(15,21,31,.35); backdrop-filter: blur(6px); }

/* Logo */
.logo img{ height:40px; width:auto; object-fit:contain; display:block }

/* ========== CARD ========== */
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)), var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
.card-header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}

/* ========== FORMS ========== */
.form-group{
  display:grid; grid-template-columns:1fr 1fr auto; gap:12px; align-items:end;
}
@media (max-width:820px){ .form-group{ grid-template-columns:1fr } }

.field{display:flex; flex-direction:column; gap:6px}
.field-label{color:var(--muted); font-size:var(--fz-sm)}
.input{
  width:100%; height:var(--control-h);
  background:#0f161f; color:var(--text);
  border:1px solid var(--border); border-radius:12px;
  padding:0 12px; transition:border-color .15s, box-shadow .15s, background .15s;
}
.input:hover{border-color:#283a50}

/* ========== BUTTONS ========== */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  height:var(--control-h); padding:0 14px;
  border-radius:12px; border:1px solid var(--border);
  background:linear-gradient(180deg,#141c26,#101724);
  color:var(--text); cursor:pointer;
  transition:transform .16s, box-shadow .16s, background .16s, border-color .16s;
  box-shadow:var(--shadow-soft); text-decoration:none;
}
.btn:hover{ transform:translateY(-1px) }
.btn:active{ transform:translateY(0) }
.btn-primary{
  border:none; color:#08101a;
  background:linear-gradient(180deg,var(--primary),var(--primary-2));
  box-shadow:0 10px 24px rgba(99,146,255,.35);
}
.btn-primary:hover{ background:linear-gradient(180deg,#7aa7ff,#4e86ff) }
.btn-accent{
  border:none; color:#07221e;
  background:linear-gradient(180deg,#20d3bd,#12c2a9);
  box-shadow:0 10px 24px rgba(18,194,169,.25);
}
.btn-accent:hover{ filter:saturate(1.1) }
.btn-ghost{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
}

/* ========== STATUS / MESSAGES ========== */
.status-indicator{ width:10px; height:10px; border-radius:50%; background:#4ade80; box-shadow:0 0 0 0 rgba(34,197,94,.6); animation:pulse 2s infinite }
.status-saving{ background:var(--warn); box-shadow:none; animation:none }
.status-error{ background:var(--bad); box-shadow:none; animation:none }
@keyframes pulse{ 0%{box-shadow:0 0 0 0 rgba(34,197,94,.5)} 70%{box-shadow:0 0 0 10px rgba(34,197,94,0)} 100%{box-shadow:0 0 0 0 rgba(34,197,94,0)} }

.msg{
  margin-top:12px; padding:10px 12px;
  border:1px solid var(--border); border-radius:12px;
  background:#0f141a; color:#cfe0ff
}
.msg.success{ border-color:#1b3a2c; background:#0e1612; color:#b6f1d5 }
.msg.error{ border-color:#3a1b1b; background:#161010; color:#ffb7b7 }
.msg.info{ color:#cfe0ff }

/* ========== DOWNLOADS / CHIPS ========== */
.downloads-wrap{ margin-top:14px }
.downloads-head{ display:flex; align-items:center; gap:10px; margin-bottom:8px }
.downloads-head .muted{ margin-left:auto; color:var(--muted); font-size:var(--fz-sm); text-align:center }

.chips{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px }
.chips .download-button, .chips .chip{
  background:#15202c; color:var(--text);
  border:1px solid var(--border); border-radius:999px;
  padding:6px 12px; cursor:pointer; white-space:nowrap;
  transition:background .15s, transform .15s, border-color .15s;
}
.chips .download-button:hover{ background:#1d2b3b; transform:translateY(-1px); border-color:#2a3a4f }

/* ========== TABLE (SUMMARY) ========== */
.table-wrap{ overflow:auto; margin-top:8px }
.table{
  width:100%; min-width:860px;
  border-collapse:separate; border-spacing:0;
  background:var(--table); border:1px solid var(--border);
  border-radius:12px; overflow:hidden;
}
.table thead th{
  text-align:left; font-weight:600; font-size:13px; color:#c8d6ea;
  background:var(--thead); border-bottom:1px solid var(--border);
  padding:10px 12px; position:sticky; top:0; z-index:1;
}
.table tbody td{
  padding:10px 12px; border-bottom:1px solid var(--border); color:var(--text)
}
.table tbody tr:last-child td{ border-bottom:none }
.table tbody tr:nth-child(odd){ background:rgba(255,255,255,.02) }
.table tbody tr:hover{ background:rgba(91,141,255,.06) }

/* ========== BREAKDOWNS ========== */
.breakdowns-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin:14px 0 4px; flex-wrap:wrap }
.grid-breakdowns{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; margin-top:6px }
@media (max-width:860px){ .grid-breakdowns{ grid-template-columns:1fr } }

.break-card{
  background:#0f141a; border:1px solid var(--border);
  border-radius:12px; padding:12px;
}
.break-card h4{ margin:0 0 8px 0; font-size:var(--fz-lg) }
.mini-table{ width:100%; border-collapse:separate; border-spacing:0 }
.mini-table th, .mini-table td{
  text-align:left; padding:8px 10px; border-bottom:1px solid var(--border);
  font-size:var(--fz-sm); color:var(--text)
}
.mini-table th{ color:#c8d6ea; background:#0f1620 }
.mini-table tr:last-child td{ border-bottom:none }

/* ========== HINT PANEL (textarea) ========== */
.hint-panel{ position:static }
.hint-title{ font-size:var(--fz-lg); margin-bottom:6px }
.hint-codearea{
  width:100%; min-height:160px; max-height:60vh; display:block; resize:vertical; overflow:auto;
  padding:10px 12px; border:1px solid var(--border); border-radius:12px;
  background:#0f141a; color:#cfe0ff;
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
  font-size:clamp(11px, 1.4vw, 13px); line-height:1.5; tab-size:2;
  word-break:break-word; overflow-wrap:anywhere;
}
@media (max-width:480px){ .hint-codearea{ padding:8px 10px; max-height:50vh } }

/* ========== UTILITIES / SAFETY ========== */
.hidden{ display:none }
#result-div{ min-height:56px }
#download-buttons-container{ min-height:44px; display:flex; flex-wrap:wrap; gap:8px }
#summary-table tbody:empty::before{ content:""; display:block; height:180px }

@media (max-width:420px){
  .header-bar{ padding:12px 0 }
  .card{ padding:12px }
  .chips .download-button, .chips .chip{ padding:6px 10px }
  .table thead th, .table tbody td{ padding:8px 10px }
}

/* ========== DARK SCROLLBAR ========== */
*{ scrollbar-width:thin; scrollbar-color:#2a3442 #0f141a }
*::-webkit-scrollbar{ width:10px; height:10px }
*::-webkit-scrollbar-track{ background:#0f141a; border-radius:10px }
*::-webkit-scrollbar-thumb{ background:#2a3442; border-radius:10px; border:2px solid #0f141a }
*::-webkit-scrollbar-thumb:hover{ background:#3b4757 }

/* === FIX: ровные отступы между блоками === */


/* 2) ХЕДЕР СЛОЕМ ВЫШЕ И ЗАЗОР ПОД НИМ */
.app-header{ position: sticky; top: 0; z-index: 100; }
.app-header + main{ margin-top: 20px; }  /* чтобы контент не прилипал к шапке */

/* 3) ВЕРТИКАЛЬНЫЙ РИТМ — ОТСТУПЫ МЕЖДУ СЕКЦИЯМИ */
main.container{
  display: flex;
  flex-direction: column;
  gap: 24px;           /* единый интервал между всеми секциями */
}

/* на очень узких — чуть компактнее */
@media (max-width: 480px){
  main.container{ gap: 16px; }
}

/* 4) СЕКЦИИ РАСТЯГИВАЮТСЯ ШИРОКО И НЕ НАЛЕЗАЮТ ДРУГ НА ДРУГА */
.hint-panel,
.parser-section,
.summary-section{
  width: 100%;
}

/* 5) МЕЛКИЕ ОТСТУПЫ ВНУТРИ КОМПОЗИТНЫХ БЛОКОВ, ЧТОБЫ НЕ СЛИПАЛОСЬ */
.downloads-wrap,
.table-wrap,
.grid-breakdowns{
  margin-top: 12px;
}
